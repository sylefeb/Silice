unit main(output uint8 leds)
{
  uint32 cycle(0);

  algorithm {
    uint8 v = cycle;  // should be detected as trickling

    __display("[stage 0, cycle %d] ==== in:%d",cycle,v);
  ->
    // empty
  ->
    // empty
  ->
    // empty
  ->
     __display("[stage 4, cycle %d] ==== out:%d",cycle,v);

  }

  always_after {
    __display("[at cycle %d (reset:%b)]",cycle,reset);
    cycle = cycle + 1;
  }
}
